<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Consulta | Paris & Bea</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/consulta.css" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Icons+Outlined" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- Favicon “clásico” -->
  <link rel="icon" type="image/png" sizes="32x32" href="images/recursos/favicon-32.png">

  <!-- Icono para iOS / iPadOS (pantalla de inicio) -->
  <link rel="apple-touch-icon" sizes="180x180" href="images/recursos/icon-180.png">

  <!-- Manifest PWA con los tamaños que Android / Chrome necesita -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#276040"><!-- color de la barra en Android -->

</head>

<body>

  <!-- CABECERA -->
  <header>
    <img src="images/recursos/otro-logo.png" alt="Logo" />
    <div class="info">
      <h1 id="profName">Profesional</h1>
      <h2 id="pacName">Paciente</h2>
    </div>
  </header>

  <!-- PANELES -->
  <div id="panels">
    <!-- Datos del paciente -->
    <div id="infoPanel" class="panel info-panel">
      <div id="mainData">Cargando…</div>
      <div class="panel-mask" id="infoMask"></div>
    </div>

    <div id="divider"></div>

    <!-- Chat, asistente y logs -->
    <div id="chatPanel" class="panel chat-panel">
      <div id="log"></div>
      <div style="display:flex;flex-wrap:wrap;border-radius:30px; box-shadow: 0 3px 8px rgba(0, 0, 0, .1);">
        <button id="btnSaveChat" class="botonesChat" style="display:none">
          <span class="material-symbols-outlined">file_save</span> Guardar
        </button>
        <button id="btnResumen" class="botonesChat" title="Resumen del paciente">
          <span class="material-symbols-outlined">article_person</span> Resumen
        </button>
        <button id="btnCitasHoy" class="botonesChat" title="Citas de hoy">
          <span class="material-symbols-outlined">event</span> Citas hoy
        </button>
        <button id="btnCitasSemana" class="botonesChat" title="Citas de hoy">
          <span class="material-symbols-outlined">event</span> Citas semana
        </button>
        <button id="btnPuncion" class="botonesChat" title="Punción seca">
          <span class="material-symbols-outlined">acupuncture</span> Punción
        </button>
        <button id="btnSuelo" class="botonesChat" title="Suelo pélvico">
          <span class="material-symbols-outlined">gynecology</span> Pélvico
        </button>
        <button id="btnReload" class="botonesChat" title="Recargar página">
          <span class="material-symbols-outlined">refresh</span> Limpiar
        </button>
      </div>
      <div class="panel-mask" id="chatMask"></div>
    </div>
  </div>

  <!-- Modal guía -->
  <div id="modalGuide">
    <div class="panel">
      <h3 id="modalTitle"></h3>
      <ul id="modalList"></ul>
      <div style="display:flex;justify-content:space-between;margin-top:18px">
        <button id="btnGuideCancel" style="padding:8px 22px;background:#a12525;
                   border:none;border-radius:10px;color:#fff;font-weight:700;
                   cursor:pointer">
          Cancelar
        </button>
        <button id="btnGuideSave" style="padding:8px 22px;background:#4482ff;
                   border:none;border-radius:10px;color:#fff;font-weight:700;
                   cursor:pointer">
          Guardar
        </button>
      </div>
      </button>
    </div>
  </div>

  <!-- Modal timeout 25 min -->
  <div id="modalTimeout" style="display:none;position:fixed;inset:0;
     background:rgba(0,0,0,.55);z-index:1000;align-items:center;justify-content:center">
    <div class="panel" style="background:#fff;padding:26px 30px;border-radius:14px;
       max-width:320px;text-align:center;font-size:16px;pointer-events:auto">
      <p>⏱️ La grabación lleva más de 25&nbsp;min.<br>¿Qué quieres hacer?</p>
      <button id="btnCancel" style="margin:10px 8px 0;padding:8px 18px;background:#a12525;
            border:none;border-radius:10px;color:#fff;cursor:pointer">Cancelar</button>
      <button id="btnSend" style="margin:10px 8px 0;padding:8px 18px;background:#276040;
            border:none;border-radius:10px;color:#fff;cursor:pointer">Enviar</button>
    </div>
  </div>

  <!-- Modal “escribir al asistente” -->
  <div id="modalAsk" style="display:none;position:fixed;inset:0;
            background:rgba(0,0,0,.55);z-index:1000;
            align-items:center;justify-content:center">
    <div class="panel" style="background:#fff;padding:26px 30px;
         border-radius:14px;max-width:620px;width:90%;
         display:flex;flex-direction:column;gap:18px;
         pointer-events:auto; margin-bottom: 250px;">

      <!-- textarea que ya tenías -->
      <textarea id="txtMessage" placeholder="Escribe…" style="width:100%;min-height:120px;max-height:360px;
             padding:10px;border:2px solid #aed3c1;border-radius:10px;
             font-size:16px;resize:vertical;overflow:auto"></textarea>

      <!-- botón enviar -->
      <button id="btnAskSend" class="btn-round btn-small" title="Enviar" style="align-self:flex-end">
        <span class="material-icons-outlined">send</span>
      </button>
    </div>
  </div>

  <!-- SELECTOR DE BLOQUE -->
  <div class="block-selector">
    <button class="chip active" data-block="historial" id="chipHist">Historial</button>
    <button class="chip" data-block="evaluacion" id="chipEval">Evaluación</button>
    <button class="chip" data-block="tratamiento" id="chipTrat">Tratamiento</button>
    <button class="chip" data-block="sesion" id="chipSes">Sesión</button>
  </div>

  <div id="screensaver"></div>

  <!-- BOTONES -->
  <div class="bottom-bar">
    <button id="btnStopTTS" class="btn-round btn-small" title="Parar voz" style="display:none; color: white">
      Cancel
    </button>
    <button id="btnRecord" class="btn-round" title="Grabar bloque">
      <span class="material-icons-outlined">mic</span></button>
    <button id="btnHome" class="btn-round btn-small" title="Cambiar de paciente">
      <span class="material-icons-outlined">home</span></button>
    <button id="btnKeyboard" class="btn-round btn-small" title="Escribir al asistente">
      <span class="material-icons-outlined">keyboard</span>
    </button>
    <button id="btnUpload" class="btn-round btn-small" title="Adjuntar archivo">
      <span class="material-icons-outlined">add</span>
    </button>
    <input id="filePicker" type="file" accept=".pdf,.doc,.docx,.png,.jpg,.jpeg,.webp,.gif,.heic" multiple
      style="display:none">
    <button id="btnModelO3" class="btn-round btn-small" title="Usar modelo o3">Pro</button>
    <button id="btnTalk" class="btn-round" title="Hablar con el asistente">
      <img src="images/recursos/voice_icon.png" style="max-width:30px" alt="Logo" /></button>
  </div>

  <script src="js/consulta.js"></script>
</body>

</html>